<!-- Falls wir sortierung mit javascript machen wollen (+ class="sortierbar" bei jedem Tabellenelement)
<!DOCTYPE html">
<html>
 <head>
  <meta charset="UTF-8" /">

  <script type="text/javascript" src="js/TableSort.js"></script>
 </head>
-->

 <?php session_start();
use Application\Model\Zahlungsteilnehmer;?>
<?=$msg?>
<?=$err?>

<h2>Gesamtsaldo: <?php if($saldo>=0){?>
<font color="#1AA11C"><?=$saldo?></font></h2>
<?php }if($saldo<0){?>
<font color="#FF0000"><?=$saldo?></font></h2>
<?php } ?>

<form action="statistiken" method="post">

<tr><td>Kategorie: </td><td>
	<select name="kategorie">
		<option value=''>alle Kategorien</option>
	
	<?php
	//Alle Kategorien in die Auswahlliste schreiben
	foreach ($kategorieliste as $zaehler => $kategorie) { ?>
			<option value='<?=$kategorie->getK_id()?>'
				<?php // Die ausgewählte Kategorie wird wieder mitgeladen
					if ($kategorie->getK_id() == $k_id)
						echo "selected='selected'";
				?>
			> <?=$kategorie->getKategoriebeschreibung() ?> </option>
	<?php } ?> 
	</select>
</td>
<td>nach: </td><td><input type="date" name="afterdate" value="<?=$afterDate?>" placeholder="YYYY-MM-DD">
<td>vor: </td><td><input type="date" name="beforedate" value="<?=$beforeDate?>" placeholder="YYYY-MM-DD"><td>
</td>


<td>Status: 
			<input type="checkbox" name="status[]" value='offen' checked>offen
			</input>
			
			<input type="checkbox" name="status[]" value=beglichen> beglichen
			</input>
	
	</td>
	
	<td>Gruppe: </td> <td>
	
	<select name="gruppe">
	<option value=''>alle Gruppen </option>
	<?php
	//Alle Kategorien in die Auswahlliste schreiben
	
	foreach ($gruppenliste as $zaehler => $gruppenmitglied) { ?>
		
			<option value='<?=$gruppenmitglied->getGruppe()->getG_id()?>' 
									<?php // Die ausgewählte Gruppe wird wieder mitgeladen
									if ($gruppenmitglied->getGruppe()->getG_id() == $gruppe)
										echo "selected='selected'";
								?>
			><?=$gruppenmitglied->getGruppe()->getGruppenname()?></option>
	<?php } ?> 
	</select>
</td>

	<td>
			<input type="checkbox" name="ersteller[]" value='ersteller' checked>Zahlungen, die ich erstellt habe
			</input>
			
			<input type="checkbox" name="ersteller[]" value='nersteller' checked> Zahlungen, die ich nicht erstellt habe
			</input>
	
	</td>

</tr>

<p></p>
		<table>
		<td><input class="button" type="submit" name="filteranwenden" value="Filtern"></td> </tr>
		</table>
	</form>	


<table class="datentabelle" width="80%">
<thead class="datentabelle"> 
	<tr class="datentabelle">
		<th class="datentabelle">Zahlungsbeschreibung  </th>
		<th class="datentabelle">Zahlungsdatum </th>
		<th class="datentabelle">Betrag </th>
		<th class="datentabelle">Kategorie </th>
		<th class="datentabelle">Status </th>
		<th class="datentabelle">Gruppenname</th>
		<th class="datentabelle"></th>
	</tr>
</thead>

<tbody class="datentabelle">
<?php 
	foreach ($zahlungenliste as $zaehler => $zahlungsteilnehmer) {
		
	?>

		<tr class="datentabelle">
			<td class="datentabelle"><?=$zahlungsteilnehmer->getZahlung()->getZahlungsbeschreibung()?></td>
			<td class="datentabelle"><?=$zahlungsteilnehmer->getZahlung()->getZahlungsdatum()?></td>
			<td class="datentabelle"><?=$zahlungsteilnehmer->getZahlung()->getBetrag()?></td>
			<td class="datentabelle"><?=$zahlungsteilnehmer->getZahlung()->getKategorie()->getKategoriebeschreibung()?></td> 
			<td class="datentabelle"><?=$zahlungsteilnehmer->getStatus()?></td>
			<td class="datentabelle"><?=$zahlungsteilnehmer->getZahlung()->getGruppe()->getGruppenname()?></td>
			<td class="datentabelle"><a href='zahlunganzeigen?z_id=<?=$zahlungsteilnehmer->getZahlung()->getZ_id()?>&g_id=<?=$zahlungsteilnehmer->getZahlung()->getGruppe()->getG_id()?>'><img src="img/show.jpg" /></a>
		</tr>

	<?php 
		
	}
	?>
</tbody>
</table>

